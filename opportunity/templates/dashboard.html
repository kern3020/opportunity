{% extends "base.html" %}

{% block content %}

{% block page_specific_js %} 

 <script>
  $(function() {
    $( "#dialog-confirm" ).dialog({
      resizable: false,
      height:140,
      modal: true,
      buttons: {
        "Ok": function() {
          $( this ).dialog( "close" );
        }
      }
    });
  });
  </script>

{% endblock %}

    <h1>{{ page_owner_name }} Dashboard</h1>

{% if warning_message %} 
<div id="dialog-confirm" title="{{ warning_message }}">
  <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span> </p>
<br/>
</div>
{% endif %}

This dashboard offers the job seeker an aggregated view of their job hunt. 
<div id='member-nav' >
      {% if user.is_authenticated %}
	{% if society %}
      <fieldset>
	<legend>Member:</legend>
	<form  method="get">
	viewing: <select name="mentee_id">
	  {% for m in society %}
	  <option {% if m.2 %} selected {% endif %} value="{{ m.1 }}">
	    {{ m.0 }}
	  </option>
	{% endfor %}
      </select>
	  <input type="submit" class="button" value="Go"> 
	</form>
	<a href="/members/">Connect with a member</a>
      </fieldset>
      {% endif %}
      {% endif %}
    </div>
            <h3>Positions</h2> 
    {% if page_owner_p %}
    <a class="button" href="/position/add">Add a position</a>
    {% endif %}
<p/> 
			<div id="position-container" >
	{% if position_list %}
					<ul>
		{% for position in position_list %}
                        <div id="position-{{ position.id }}">
                            <li>
                {% if page_owner_p %}
                            (<a href="/position/edit/{{ position.id }}">edit</a> | <a href=javascript:deleteEntry("/position/del/{{ position.id }}/position")>delete</a>)
                {% endif %}
                            <a href="{{ position.website }}">{{ position.title }}</a> at 
                            <a href="{{ position.company.website }}">{{ position.company.name }}</a> in {{ position.company.city }}, {{ position.company.state_province }}  </li>
                        </div>
		{% endfor %}
					</ul>
	{% else %} 
		No positions being tracked. 
	{% endif %} 
			</div>
            <hr/>
	<h3>Activities</h3> 
    {% if page_owner_p %}
        <fieldset>
            <legend>add:</legend>
            <form name="input" action="/newactivity/" method="get">
                <input type="radio" name="activity" value="networking">Attending a neworking event <br/>
                <input type="radio" name="activity" value="mentormeeting">Meet with mentor <br/>
                <input type="radio" name="activity" value="lunch">Lunch(coffee) to network<br/>
                <input type="radio" name="activity" value="interview">Interview with someone<br/>
                <input type="radio" name="activity" value="apply" checked>Apply for a position <br/>
                <input type="radio" name="activity" value="conversation">Note an interesting conversation <br/>
                <input type="submit" class="button" value="Add Selected"> 
            </form>
        </fieldset>
    {% endif %}
    <p/> 
			<div id="activity-container" >
        {% if activity_list %}   
        
				<ul>
        {% for activity in activity_list %}
                    <div id="activity-{{ activity.id }}">
                        <li> 
                        {{ activity.when }}:  
                    {% if page_owner_p %}
                        (<a href="/{{ activity.tag }}/edit/{{ activity.id }}">edit</a> | <a href=javascript:deleteEntry("/{{ activity.tag }}/del/{{ activity.id }}/activity")>delete</a>)
                    {% endif %} 
                        {{ activity }} <br/>
            {% if activity.comment %}
                        Comments: {{ activity.comment }} 
            {% endif %} 
                        </li>
                    </div>
        {% endfor %}
				</ul>
    {% else %}
        There are no activities at this time. You can add them below. 
    {% endif %}
			</div>
    <hr/>
 <h3>Prospective employers </h3>
     {% if page_owner_p %}
      <p/> 
     
        <fieldset>
            <legend>add:</legend>
            <form id="company_form" action="/prospect/add/" method="get">
                <label for="id_company">Company:</label>
                <input id="id_company" type="text" name="company" />
                <input type="submit" class="button" value="Add" onclick='$("#spinner").show();return true;' /> 
                <div id="spinner" ><img src="{{ STATIC_URL }}gif/loadinfo.net.gif"/></div>        
            </form>
        </fieldset>
      <script>
 
            $("#company_form").submit(function(){
                var isFormValid = true;
                if (isEmpty($("#id_company").val()) ) {
                    isFormValid = false;
                }
                if (!isFormValid) {
                    $("#spinner").hide()
                    alert("Fill in the text field. \nWhat's the company in which you're interested?");
                }

                return isFormValid;
            });
        </script>
        
        <p/> 
        {% endif %}
    <div id="prospect-container">
        {% if prospect_list %}
            <ul>
            {% for prospect in prospect_list %}
                <div id="prospect-{{ prospect.id }}">
                    <li> 
                {% if page_owner_p %}
                    (<a href="/prospect/edit/{{ prospect.id }}">edit</a> | <a href=javascript:deleteEntry("/prospect/del/{{ prospect.id }}/prospect")>delete</a>) 
                {% endif %}
                    <a href="{{ prospect.website }}">{{ prospect.name }}</a> in {{ prospect.city }}, {{ prospect.state_province }}  </li>
                </div>
            {% endfor %}
            </ul>
        {% else %}
            No companies.
        {% endif %}
    </div>
    <hr/>
       <h3>People </h3>
    {% if page_owner_p %}
    <a class="button" href="/contact/add">Add a person</a>
      <p/> 
    {% endif %}
    <div id="contact-container">
        {% if contact_list %}
            <ul>
            {% for contact in contact_list %}
                <div id="contact-{{ contact.id }}">
                    <li>
                {% if page_owner_p %}
                     (<a href="/contact/edit/{{ contact.id }}">edit</a> | <a href=javascript:deleteEntry("/contact/del/{{ contact.id }}/contact")>delete</a> ) 
                {% endif %} 
                     {{ contact.first_name }}  {{ contact.last_name }}, {{ contact.title }} at {{ contact.company.name }}
                     </li>
                </div>
            {% endfor %}
            </ul>
        {% else %}
            No contacts.
        {% endif %}
    </div>

{% endblock %}
